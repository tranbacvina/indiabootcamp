<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Google fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Work+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
    rel="stylesheet">

  <link href="https://fonts.googleapis.com/css2?family=Material+Icons+Outlined" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
    crossorigin="" />

  <!-- Stylesheets -->
  <link rel="stylesheet" href="/css/vendors.css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
  <title>Tất cả khoá học</title>
</head>

<body class="preloader-visible" data-barba="wrapper">
  <!-- preloader start -->
  <div class="preloader js-preloader">
    <div class="preloader__bg"></div>
  </div>
  <!-- preloader end -->

  <!-- barba container start -->
  <div class="barba-container" data-barba="container">


    <main class="main-content">


      <header class="header -dashboard -dark-bg-dark-1 js-header">
        <div class="header__container py-20 px-30">
          <div class="row justify-between items-center">
            <div class="col-auto">
              <div class="d-flex items-center">
                <div class="header__explore text-dark-1">
                  <button class="d-flex items-center js-dashboard-home-9-sidebar-toggle">
                    <i class="icon -dark-text-white icon-explore"></i>
                  </button>
                </div>

                <div class="header__logo ml-30 md:ml-20">
                  <a data-barba href="/admin">
                    <img class="-light-d-none" src="/img/general/logo.svg" alt="logo">
                    <img class="-dark-d-none" src="/img/general/logo-dark.svg" alt="logo">
                  </a>
                </div>
              </div>
            </div>


          </div>
        </div>
      </header>


      <div class="content-wrapper js-content-wrapper">
        <div class="dashboard -home-9 js-dashboard-home-9">
          <%- include('../nav'); %>


            <div class="dashboard__main">
              <div class="dashboard__content bg-light-4">
                <div class="row pb-50 mb-10 justify-between">
                  <div class="col-auto">

                    <h1 class="text-30 lh-12 fw-700">Khoá học</h1>
                    <div class="mt-10">Tất cả khoá học ở đây.</div>

                  </div>
                  <div class="col-auto">
                    <button class="button -md -purple-1 text-white" data-el-toggle=".js-msg-toggle">Tạo Courses</button>
                  </div>
                </div>

                <div class="row y-gap-30">
                  <div class="col-12">
                    <div class="rounded-16 bg-white -dark-bg-dark-1 shadow-4 h-100">
                      <div class="tabs -active-purple-2 js-tabs">
                        <div
                          class="tabs__controls d-flex items-center pt-20 px-30 border-bottom-light js-tabs-controls">
                          <button class="text-light-1 lh-12 tabs__button js-tabs-button is-active"
                            data-tab-target=".-tab-item-1" type="button">
                            All Courses
                          </button>
                          <button class="text-light-1 lh-12 tabs__button js-tabs-button ml-30"
                            data-tab-target=".-tab-item-2" type="button">
                            Finished
                          </button>
                          <button class="text-light-1 lh-12 tabs__button js-tabs-button ml-30"
                            data-tab-target=".-tab-item-3" type="button">
                            Not enrolled
                          </button>
                        </div>

                        <div class="tabs__content py-30 px-30 js-tabs-content">
                          <div class="tabs__pane -tab-item-1 is-active">
                            <div class="row y-gap-10 justify-between">
                              <div class="col-auto">
                                <form class="search-field border-light rounded-8 h-50" action="/admin/course"
                                  method="GET">
                                  <input class="bg-white -dark-bg-dark-2 pr-50" type="text"
                                    placeholder="Tìm kiếm tên, url" name="text">
                                  <button class="" type="submit">
                                    <i class="icon-search text-light-1 text-20"></i>
                                  </button>
                                </form>
                              </div>

                              <div class="col-auto">
                                <div class="d-flex flex-wrap y-gap-10 x-gap-20">
                                  <div>
                                    <select name="" id="" class=" form-select" onchange="location = this.value;">
                                      <option value="">
                                        Chọn
                                      </option>
                                      <% for (let topic of topics) { %>
                                        <option value="/admin/course/topic/<%= topic.slug %>">
                                          <%= topic.name %>
                                        </option>
                                        <% } %>
                                    </select>
                                    <div
                                      class="toggle-element -dropdown -dark-bg-dark-2 -dark-border-white-10 js-click-dropdown js-category-toggle">
                                      <div class="text-14 y-gap-15 js-dropdown-list">
                                        <% for (let topic of topics) { %>
                                          <a href="/admin/topic/<%= topic.slug %>" class="d-block js-dropdown-link">
                                            <%= topic.name %>
                                          </a>
                                          <% } %>


                                      </div>
                                    </div>
                                  </div>
                                  <div>

                                  </div>
                                </div>
                              </div>
                            </div>

                            <div class="row y-gap-30 pt-30">
                              <% for (let item of course) { %>

                                <div class="w-1/3 xl:w-1/3 lg:w-1/2 sm:w-1/1">
                                  <div class="relative">
                                    <img class="rounded-8 w-1/1" src="<%= item.image %>" alt="image">

                                    <button class="absolute-button" data-el-toggle=".js-more-1-toggle">
                                      <span
                                        class="d-flex items-center justify-center size-35 bg-white shadow-1 rounded-8">
                                        <i class="icon-menu-vertical"></i>
                                      </span>
                                    </button>

                                    <div class="toggle-element -dshb-more js-more-1-toggle">
                                      <div class="px-25 py-25 bg-white -dark-bg-dark-2 shadow-1 border-light rounded-8">

                                        <a href="#" class="d-flex items-center mt-20">
                                          <div class="icon-close"></div>
                                          <div class="text-17 lh-1 fw-500 ml-12">Xoá</div>
                                        </a>
                                      </div>
                                    </div>
                                  </div>

                                  <div class="pt-15">
                                    <div class="d-flex y-gap-10 justify-between items-center">
                                      <div class="text-14 lh-1">
                                        <%- item.Topic ? item.Topic.name : '' %>
                                      </div>

                                    </div>

                                    <h3 class="text-16 fw-500 lh-15 mt-10"><a href="/admin/course/<%= item.id %>">
                                        <%= item.name %>
                                      </a>

                                    </h3>

                                  </div>
                                </div>
                                <% } %>

                            </div>

                            <div class="row justify-center pt-90 lg:pt-50">
                              <div class="col-auto">
                                <div class="pagination -buttons">
                                  <% if (paginate.hasPreviousPages) { %>
                                    <button class="pagination__button -prev">
                                      <i class="icon icon-chevron-left"></i>
                                    </button>
                                    <%}%>

                                      <div class="pagination__count">
                                        <% pages.forEach(function(page) { %>
                                          <a href="<%=page.url%>"
                                            class="<%- currentPage == page.number ? '-count-is-active' : '' %> ">
                                            <%=page.number%>
                                          </a>
                                          <% }); %>
                                      </div>
                                      <% if (paginate.hasNextPages(pageCount)) { %>
                                        <button class="pagination__button -next">
                                          <i class="icon icon-chevron-right"></i>
                                        </button>
                                        <%}%>

                                </div>
                              </div>
                            </div>
                          </div>

                          <div class="tabs__pane -tab-item-2"></div>
                          <div class="tabs__pane -tab-item-3"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

              </div>


            </div>
        </div>
      </div>
    </main>
    <aside class="sidebar-menu toggle-element js-msg-toggle js-dsbh-sidebar-menu">
      <div class="sidebar-menu__bg"></div>

      <div class="sidebar-menu__content scroll-bar-1 py-30 px-40 sm:py-25 sm:px-20 bg-white -dark-bg-dark-1">
        <div class="row items-center justify-between mb-30">
          <div class="col-auto">
            <div class="-sidebar-buttons">
              <button data-sidebar-menu-button="messages" class="text-17 text-dark-1 fw-500 -is-button-active">
                Tạo Course via urls
              </button>

              <button data-sidebar-menu-button="messages-2" data-sidebar-menu-target="messages"
                class="d-flex items-center text-17 text-dark-1 fw-500">
                <i class="icon-chevron-left text-11 text-purple-1 mr-10"></i>
                Messages
              </button>

              <button data-sidebar-menu-button="settings" data-sidebar-menu-target="messages"
                class="d-flex items-center text-17 text-dark-1 fw-500">
                <i class="icon-chevron-left text-11 text-purple-1 mr-10"></i>
                Settings
              </button>

              <button data-sidebar-menu-button="contacts" data-sidebar-menu-target="messages"
                class="d-flex items-center text-17 text-dark-1 fw-500">
                <i class="icon-chevron-left text-11 text-purple-1 mr-10"></i>
                Tạo kiểu nhập
              </button>
            </div>
          </div>

          <div class="col-auto">
            <div class="row x-gap-10">
              <div class="col-auto">
                <button data-sidebar-menu-target="settings"
                  class="button -purple-3 text-purple-1 size-40 d-flex items-center justify-center rounded-full">
                  <i class="icon-setting text-16"></i>
                </button>
              </div>
              <div class="col-auto">
                <button data-sidebar-menu-target="contacts"
                  class="button -purple-3 text-purple-1 size-40 d-flex items-center justify-center rounded-full">
                  <i class="icon-friend text-16"></i>
                </button>
              </div>
              <div class="col-auto">
                <button data-el-toggle=".js-msg-toggle"
                  class="button -purple-3 text-purple-1 size-40 d-flex items-center justify-center rounded-full">
                  <i class="icon-close text-14"></i>
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="relative js-menu-switch">
          <div data-sidebar-menu-open="messages" class="sidebar-menu__item -sidebar-menu -sidebar-menu-opened">
            <form action="" id="handle_addcourse" class="contact-form">

              <input type="email" hidden placeholder="adbc@gmail.com" value="abc@gmail.com" id="email">
              <div class="col-12">
                <label class="text-16 lh-1 fw-500 text-dark-1 mb-10">Courses:</label>
                <textarea placeholder="https://www.udemy.com/course/git-and-github-bootcamp/" required="" rows="7"
                  id="links"
                  style="border: 1px solid var(--color-light-8);padding: 15px 22px;border-radius: 8px;"></textarea>

              </div>
              <div class="col-12">
                <select name="topicId" id="topicId" class=" form-select">
                  <% for (let topic of topics) { %>
                    <option value="<%=topic.id%>">
                      <%= topic.name %>
                    </option>
                    <% } %>
                </select>
              </div>
              <div class="col-12">
                <button type="submit" class="button -md -purple-1 text-white w-1/1">ADD</button>
              </div>
            </form>

          </div>


          <div data-sidebar-menu-open="messages-2" class="sidebar-menu__item -sidebar-menu">
            <div class="row x-gap-10 y-gap-10">
              <div class="col-auto">
                <img src="img/dashboard/right-sidebar/messages-2/1.png" alt="image">
              </div>
              <div class="col">
                <div class="text-15 lh-12 fw-500 text-dark-1 pt-8">Arlene McCoy</div>
                <div class="text-14 lh-1 mt-5">Active</div>
              </div>
            </div>

            <div class="mt-20 pt-30 border-top-light">
              <div class="row y-gap-20">
                <div class="col-12">
                  <div class="row x-gap-10 y-gap-10 items-center">
                    <div class="col-auto">
                      <img src="img/dashboard/right-sidebar/messages-2/2.png" alt="image">
                    </div>
                    <div class="col-auto">
                      <div class="text-15 lh-12 fw-500 text-dark-1">Albert Flores</div>
                    </div>
                    <div class="col-auto">
                      <div class="text-14 lh-1 ml-3">35 mins</div>
                    </div>
                  </div>
                  <div class="bg-light-3 rounded-8 px-30 py-20 mt-15">
                    How likely are you to recommend our company to your friends and family?
                  </div>
                </div>

                <div class="col-12">
                  <div class="row x-gap-10 y-gap-10 items-center justify-end">
                    <div class="col-auto">
                      <div class="text-14 lh-1 mr-3">35 mins</div>
                    </div>
                    <div class="col-auto">
                      <div class="text-15 lh-12 fw-500 text-dark-1">You</div>
                    </div>
                    <div class="col-auto">
                      <img src="img/dashboard/right-sidebar/messages-2/3.png" alt="image">
                    </div>
                  </div>
                  <div class="text-right bg-light-7 -dark-bg-dark-2 text-purple-1 rounded-8 px-30 py-20 mt-15">
                    How likely are you to recommend our company to your friends and family?
                  </div>
                </div>

                <div class="col-12">
                  <div class="row x-gap-10 y-gap-10 items-center">
                    <div class="col-auto">
                      <img src="img/dashboard/right-sidebar/messages-2/3.png" alt="image">
                    </div>
                    <div class="col-auto">
                      <div class="text-15 lh-12 fw-500 text-dark-1">Cameron Williamson</div>
                    </div>
                    <div class="col-auto">
                      <div class="text-14 lh-1 ml-3">35 mins</div>
                    </div>
                  </div>
                  <div class="bg-light-3 rounded-8 px-30 py-20 mt-15">
                    Ok, Understood!
                  </div>
                </div>
              </div>
            </div>

            <div class="mt-30 pb-20">
              <form class="contact-form row y-gap-20" action="post">

                <div class="col-12">

                  <textarea placeholder="Write a message" rows="7"></textarea>
                </div>

                <div class="col-12">
                  <button type="submit" class="button -md -purple-1 text-white">Send Message</button>
                </div>
              </form>
            </div>
          </div>
          <div data-sidebar-menu-open="contacts" class="sidebar-menu__item -sidebar-menu">
            <form class="contact-form row y-gap-30" action="/admin/course/" method="POST">

              <div class="col-12">

                <label class="text-16 lh-1 fw-500 text-dark-1 mb-10">Name*</label>

                <input type="text" name="name" id="name">
              </div>
              <div class="col-12">

                <label class="text-16 lh-1 fw-500 text-dark-1 mb-10">URI*</label>

                <input type="text" name="url" id="URI">
              </div>
              <div class="col-12">

                <label class="text-16 lh-1 fw-500 text-dark-1 mb-10">slug*</label>

                <input type="text" name="slug" id="slug">
              </div>
              <div class="col-12">

                <label class="text-16 lh-1 fw-500 text-dark-1 mb-10">Price VN*</label>

                <input type="text" value="50000" name="price" id="price">
              </div>
              <div class="col-12">

                <label class="text-16 lh-1 fw-500 text-dark-1 mb-10">Price US*</label>

                <input type="text" value="300" name="priceus" id="priceus">
              </div>
              <div class="col-12">

                <label class="text-16 lh-1 fw-500 text-dark-1 mb-10">Price India*</label>

                <input type="text" value="9900" name="priceindia" id="priceindia">
              </div>
              <div class="col-12">

                <label class="text-16 lh-1 fw-500 text-dark-1 mb-10">Danh
                  mục*</label>

                <select name="topicId" id="topicId" class=" form-select">
                  <option value="">Chọn</option>
                  <% for (let topic of topics) { %>
                    <option value="<%= topic.id %>">
                      <%= topic.name %>
                    </option>
                    <% } %>
                </select>
              </div>
              <div class="col-12">

                <label class="text-16 lh-1 fw-500 text-dark-1 mb-10">whatyouwilllearn</label>
                <textarea class="" id="whatyouwilllearn" name="whatyouwilllearn">[]</textarea>
              </div>
              <div class="col-12">

                <label class="text-16 lh-1 fw-500 text-dark-1 mb-10">requirements</label>
                <textarea class="" id="requirements" name="requirements">[]</textarea>

                </pre>
              </div>
              <div class="col-12">

                <label class="text-16 lh-1 fw-500 text-dark-1 mb-10">Mô tả
                  ngắn*</label>
                <textarea class="" id="description" name="description"></textarea>

              </div>
              <div class="col-12">

                <label class="text-16 lh-1 fw-500 text-dark-1 mb-10">Nội dung
                  chính*</label>
                <textarea class="editor" id="description_log" rows="15" name="description_log"></textarea>

              </div>
              <div class="col-12">
                <div class="d-flex lg:flex-column">
                  <div class="relative shrink-0">

                    <div class="absolute-full-center d-flex justify-end py-20 px-20">
                      <a href="#" class="d-flex justify-center items-center bg-white size-40 rounded-8 shadow-1">
                        <i class="icon-bin text-16"></i>
                      </a>
                    </div>
                  </div>
                  <div class="w-1/1 ml-30 lg:ml-0 lg:mt-20">

                    <div class="form-upload col-12">
                      <label class="text-16 lh-1 fw-500 text-dark-1 mb-10">Hình
                        đại diện*</label>
                      <div class="form-upload__wrap">
                        <input type="text" class="" id="thumbnail" name="image" value="">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-12">
                <label class="text-16 lh-1 fw-500 text-dark-1 mb-10">Drive Name</label>
                <input type="text" name="drivecoursename" id="drivecoursename">
              </div>
              <div class="col-12">
                <label class="text-16 lh-1 fw-500 text-dark-1 mb-10">Drive ID</label>
                <input type="text" name="drivecourID" id="drivecourseID">
              </div>
              <label class="text-16 lh-1 fw-500 text-dark-1 mb-10">IS Onedrive?</label>

              <select name="isOneDrive" id="isOneDrive" class=" form-select">
                <option value="1">True</option>
                <option value="2">False</option>
              </select>
              <div class="col-12">
                <label class="text-16 lh-1 fw-500 text-dark-1 mb-10">OneDriveParentReferenceId</label>
                <input type="text" name="OneDriveParentReferenceId"
                  value="b!qgDqombFqkubynkeG1i_RRWiRLdBslFBrnm1zVuZTxf5NVcUoAPjRYwj8wpjk-NV"
                  id="OneDriveParentReferenceId">
              </div>

              <div class="row y-gap-20 justify-between pt-15">

                <div class="col-auto">
                  <button class="button -md -purple-1 text-white" id="updateButton" type="submit">Tạo</button>
                </div>
              </div>
            </form>
          </div>


          <div data-sidebar-menu-open="settings" class="sidebar-menu__item -sidebar-menu">
            <div class="text-17 text-dark-1 fw-500">Privacy</div>
            <div class="text-15 mt-5">You can restrict who can message you</div>
            <div class="mt-30">

              <div class="form-radio d-flex items-center ">
                <div class="radio">
                  <input type="radio">
                  <div class="radio__mark">
                    <div class="radio__icon"></div>
                  </div>
                </div>
                <div class="lh-1 text-13 text-dark-1 ml-12">My contacts only</div>
              </div>


              <div class="form-radio d-flex items-center mt-15">
                <div class="radio">
                  <input type="radio">
                  <div class="radio__mark">
                    <div class="radio__icon"></div>
                  </div>
                </div>
                <div class="lh-1 text-13 text-dark-1 ml-12">My contacts and anyone in my courses</div>
              </div>


              <div class="form-radio d-flex items-center mt-15">
                <div class="radio">
                  <input type="radio">
                  <div class="radio__mark">
                    <div class="radio__icon"></div>
                  </div>
                </div>
                <div class="lh-1 text-13 text-dark-1 ml-12">Anyone on the site</div>
              </div>

            </div>

            <div class="text-17 text-dark-1 fw-500 mt-30 mb-30">Notification preferences</div>
            <div class="form-switch d-flex items-center">
              <div class="switch">
                <input type="checkbox">
                <span class="switch__slider"></span>
              </div>
              <div class="text-13 lh-1 text-dark-1 ml-10">Email</div>
            </div>

            <div class="text-17 text-dark-1 fw-500 mt-30 mb-30">General</div>
            <div class="form-switch d-flex items-center">
              <div class="switch">
                <input type="checkbox">
                <span class="switch__slider"></span>
              </div>
              <div class="text-13 lh-1 text-dark-1 ml-10">Use enter to send</div>
            </div>
          </div>
        </div>
      </div>
    </aside>
  </div>
  <!-- barba container end -->

  <!-- JavaScript -->
  <%- include('../../layout/footerjs'); %>
    <script src="/js/ckeditor.js"></script>
    <script>
      let editor;
      ClassicEditor
        .create(document.querySelector('.editor'), {
          licenseKey: '',
        })
        .then(newEditor => {
          editor = newEditor;
        })
        .catch(error => {
          console.error('Oops, something went wrong!');
          console.error('Please, report the following error on https://github.com/ckeditor/ckeditor5/issues with the build id and the error stack trace:');
          console.warn('Build id: 1lt32d2j8rmx-gq1q9if87fsi');
          console.error(error);
        });
    </script>
    <script>
      const handle_addcourse = document.getElementById("handle_addcourse");
      handle_addcourse.addEventListener("submit", async (event) => {
        try {
          event.preventDefault()
          const uri = document.getElementById("links").value
          const email = document.getElementById("email").value
          const topicId = document.getElementById("topicId").value

          let links = Array.from(uri.match(/[(http(s)?):\/\/(www\.)?a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/ig))
          links = links.map(item => { return { uri: item, topicId } })
          console.log(links)
          const checkCourseRequest = await axios.post('/course/check', {
            email, links
          })

          for (let item of checkCourseRequest.data) {
            toastr.success('Add course: ', item.data.name)
          }
        }
        catch (error) {
          console.log(error)
          toastr.error(error)

        }
      })
    </script>

</body>

</html>